<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.8">
  <compounddef id="Connection_8cpp" kind="file">
    <compoundname>Connection.cpp</compoundname>
    <includes refid="Connection_8h" local="no">Connection.h</includes>
    <incdepgraph>
      <node id="804">
        <label>netinet/in.h</label>
      </node>
      <node id="800">
        <label>poll.h</label>
      </node>
      <node id="806">
        <label>fcntl.h</label>
      </node>
      <node id="801">
        <label>string</label>
      </node>
      <node id="799">
        <label>sys/unistd.h</label>
      </node>
      <node id="803">
        <label>SocketFd.h</label>
        <link refid="SocketFd_8h"/>
        <childnode refid="804" relation="include">
        </childnode>
        <childnode refid="805" relation="include">
        </childnode>
        <childnode refid="806" relation="include">
        </childnode>
        <childnode refid="798" relation="include">
        </childnode>
        <childnode refid="807" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="797">
        <label>Connection.h</label>
        <link refid="Connection_8h"/>
        <childnode refid="798" relation="include">
        </childnode>
        <childnode refid="799" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
        <childnode refid="803" relation="include">
        </childnode>
      </node>
      <node id="807">
        <label>unistd.h</label>
      </node>
      <node id="802">
        <label>Transceiver.h</label>
        <link refid="Transceiver_8h"/>
      </node>
      <node id="796">
        <label>src/Connection.cpp</label>
        <link refid="Connection.cpp"/>
        <childnode refid="797" relation="include">
        </childnode>
      </node>
      <node id="805">
        <label>sys/socket.h</label>
      </node>
      <node id="798">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="Connection_8cpp_1a591f79219998eb65aeacbd25e4459fee" prot="public" static="no">
        <name>WEADMACRO</name>
        <param><defname>function</defname></param>
        <initializer>n = sum = 0; \
do { \
	n = ::function(ufds.fd, buf + sum, size - sum); \
	if (n == 0) { \
		return (sum); /* End of File/Stream */\
	} else if (n &lt; 0) { \
		::perror(#function); \
		return (-1); /* Error */\
	} else { \
		sum += n; \
	} \
} while (sum &lt; size); \
return (sum); \</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/inbre001/downloads/tmp/NewComponents/trunk/0xSocket/src/Connection.cpp" line="14" column="9" bodyfile="/home/inbre001/downloads/tmp/NewComponents/trunk/0xSocket/src/Connection.cpp" bodystart="14" bodyend="-1"/>
        <referencedby refid="classConnection_1ab16b8a780c69303beec9b1f67fb596f3" compoundref="Connection_8cpp" startline="35" endline="38">Connection::recv</referencedby>
        <referencedby refid="classConnection_1a5466a66e569e81d891559686f2c7594b" compoundref="Connection_8cpp" startline="30" endline="33">Connection::send</referencedby>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&lt;<ref refid="Connection_8h" kindref="compound">Connection.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3" refid="classConnection_1a3bc70a7fdfcabe58f6ca003f450e7b34" refkind="member"><highlight class="normal"><ref refid="classConnection_1a3bc70a7fdfcabe58f6ca003f450e7b34" kindref="member">Connection::Connection</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>fd,</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>taddr)<sp/>{</highlight></codeline>
<codeline lineno="4"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classConnection_1a04bb846a50a9357bab86238956940d65" kindref="member">targetaddr</ref><sp/>=<sp/>taddr;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classConnection_1aca989af92a96ac113222d7b8640df507" kindref="member">sum</ref><sp/>=<sp/><ref refid="classConnection_1af54be737cc02308299c2e80a893a3e46" kindref="member">n</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSocketFd_1a0636825d276c3525e0d8af969ce2d3b6" kindref="member">ufds</ref>.fd<sp/>=<sp/>fd;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSocketFd_1a0636825d276c3525e0d8af969ce2d3b6" kindref="member">ufds</ref>.events<sp/>=<sp/>POLLIN<sp/>|<sp/>POLLOUT<sp/>|<sp/>POLLPRI;</highlight></codeline>
<codeline lineno="8"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10" refid="classConnection_1a2e4352edf667bea83001569e9da8a24d" refkind="member"><highlight class="normal"><ref refid="classConnection_1a2e4352edf667bea83001569e9da8a24d" kindref="member">Connection::~Connection</ref>()<sp/>{</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal">}</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="Connection_8cpp_1a591f79219998eb65aeacbd25e4459fee" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>WEADMACRO(function)<sp/>\</highlight></codeline>
<codeline lineno="15"><highlight class="preprocessor">n<sp/>=<sp/>sum<sp/>=<sp/>0;<sp/>\</highlight></codeline>
<codeline lineno="16"><highlight class="preprocessor">do<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="17"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>::function(ufds.fd,<sp/>buf<sp/>+<sp/>sum,<sp/>size<sp/>-<sp/>sum);<sp/>\</highlight></codeline>
<codeline lineno="18"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(n<sp/>==<sp/>0)<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="19"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>(sum);<sp/></highlight><highlight class="comment">/*<sp/>End<sp/>of<sp/>File/Stream<sp/>*/</highlight><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="20"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>else<sp/>if<sp/>(n<sp/>&lt;<sp/>0)<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="21"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>::perror(#function);<sp/>\</highlight></codeline>
<codeline lineno="22"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>(-1);<sp/></highlight><highlight class="comment">/*<sp/>Error<sp/>*/</highlight><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="23"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>else<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="24"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sum<sp/>+=<sp/>n;<sp/>\</highlight></codeline>
<codeline lineno="25"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="26"><highlight class="preprocessor">}<sp/>while<sp/>(sum<sp/>&lt;<sp/>size);<sp/>\</highlight></codeline>
<codeline lineno="27"><highlight class="preprocessor">return<sp/>(sum);<sp/>\</highlight></codeline>
<codeline lineno="28"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="classConnection_1a5466a66e569e81d891559686f2c7594b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classConnection_1a5466a66e569e81d891559686f2c7594b" kindref="member">Connection::send</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buf,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>size,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>msec)<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classConnection_1a4e186a7e69d56c0bb84ef56032b89427" kindref="member">_poll</ref>(msec);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="Connection_8cpp_1a591f79219998eb65aeacbd25e4459fee" kindref="member">WEADMACRO</ref>(write)</highlight></codeline>
<codeline lineno="33"><highlight class="normal">}</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35" refid="classConnection_1ab16b8a780c69303beec9b1f67fb596f3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classConnection_1ab16b8a780c69303beec9b1f67fb596f3" kindref="member">Connection::recv</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buf,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>size,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>msec)<sp/>{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classConnection_1a4e186a7e69d56c0bb84ef56032b89427" kindref="member">_poll</ref>(msec);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="Connection_8cpp_1a591f79219998eb65aeacbd25e4459fee" kindref="member">WEADMACRO</ref>(read)</highlight></codeline>
<codeline lineno="38"><highlight class="normal">}</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>WEADMACRO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="classConnection_1a4e186a7e69d56c0bb84ef56032b89427" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classConnection_1a4e186a7e69d56c0bb84ef56032b89427" kindref="member">Connection::_poll</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>msec)<sp/>{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rv<sp/>=<sp/>::poll(&amp;<ref refid="classSocketFd_1a0636825d276c3525e0d8af969ce2d3b6" kindref="member">ufds</ref>,<sp/>1,<sp/>msec);</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(0<sp/>&gt;<sp/>rv)<sp/>{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>::perror(</highlight><highlight class="stringliteral">&quot;poll<sp/>error&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(0<sp/>==<sp/>rv)<sp/>{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>::perror(</highlight><highlight class="stringliteral">&quot;poll<sp/>timeout&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="comment">//else<sp/>0<sp/>&lt;<sp/>rv</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(rv);</highlight></codeline>
<codeline lineno="50"><highlight class="normal">}</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/inbre001/downloads/tmp/NewComponents/trunk/0xSocket/src/Connection.cpp"/>
  </compounddef>
</doxygen>
